static inline void fpu_copy(struct task_struct *dst, struct task_struct *src)
{
	if (use_xsave()) {
		struct xsave_struct *xsave = &dst->thread.fpu.state->xsave;

		memset(&xsave->xsave_hdr, 0, sizeof(struct xsave_hdr_struct));
		xsave_state(xsave, -1);
	} else {
		struct fpu *dfpu = &dst->thread.fpu;
		struct fpu *sfpu = &src->thread.fpu;

		unlazy_fpu(src);
		memcpy(dfpu->state, sfpu->state, xstate_size);
	}
}